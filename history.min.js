const base=location.href.split('#')[0];let running=!0;const workerCode=`function randId(len){const bytes=crypto.getRandomValues(new Uint8Array(6));let n=0n;for(let i=0;i<bytes.length;i++)n=(n<<8n)|BigInt(bytes[i]);let s=n.toString(36);while(s.length<len)s='0'+s;return s.slice(0,len);}let running=true;const ID_LEN=8;const WORKER_BATCH_SIZE=512;function produce(){if(!running)return;const out=new Array(512);for(let i=0;i<WORKER_BATCH_SIZE;i++)out[i]=randId(ID_LEN);postMessage(out);setTimeout(produce,0);}self.onmessage=e=>{if(e.data==='stop')running=false;};produce();`;const blob=new Blob([workerCode],{type:'application/javascript'});const worker=new Worker(URL.createObjectURL(blob));const q=[];worker.onmessage=e=>{Array.prototype.push.apply(q,e.data);if(q.length>200000)q.splice(0,q.length-200000)};function flush(){if(!running)return;const MAX_PUSH_PER_TICK=512;const count=Math.min(q.length,MAX_PUSH_PER_TICK);for(let i=0;i<count;i++){const id=q.shift();history.pushState(null,'',base+'#'+id)} Promise.resolve().then(flush)} Promise.resolve().then(flush);window.addEventListener('beforeunload',()=>{running=!1;worker.postMessage('stop');worker.terminate()})
